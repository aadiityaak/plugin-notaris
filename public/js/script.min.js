(function ($) {
  // Init
  // $('[data-toggle="tooltip"]').tooltip();

  $(document).ready(function () {
    $('[data-bs-toggle="tooltip"]').tooltip();
    $(".load-pdf").on("click", function (e) {
      e.preventDefault();
      var url = $(this).data("url");
      $("#exampleModalPrint .modal-body").html(
        '<iframe src="' +
          url +
          '" style="width:100%;height:80vh;" frameborder="0"></iframe>'
      );
    });

    $(".archives-post").on("click", function () {
      var postId = $(this).data("id");

      $.ajax({
        url: sweetaddons.ajaxurl,
        type: "POST",
        data: {
          action: "update_post_status",
          post_id: postId,
        },
        success: function (response) {
          console.log("Status post berhasil diubah menjadi archive");
        },
        error: function () {
          console.log("Terjadi kesalahan. Silakan coba lagi.");
        },
      });
    });
  });

  function formatRupiah(element, prefix) {
    let number_string = $(element)
        .val()
        .replace(/[^,\d]/g, "")
        .toString(),
      split = number_string.split(","),
      sisa = split[0].length % 3,
      rupiah = split[0].substr(0, sisa),
      ribuan = split[0].substr(sisa).match(/\d{3}/gi);

    // Tambahkan titik jika ada ribuan
    if (ribuan) {
      separator = sisa ? "." : "";
      rupiah += separator + ribuan.join(".");
    }

    rupiah = split[1] !== undefined ? rupiah + "," + split[1] : rupiah;
    $(element).val(prefix + rupiah);
  }

  // Menerapkan format Rupiah untuk semua input dengan class "format-rupiah" menggunakan jQuery
  $(document).ready(function () {
    $(".format-rupiah").on("keyup", function () {
      formatRupiah(this, "Rp ");
    });
  });
})(jQuery);
